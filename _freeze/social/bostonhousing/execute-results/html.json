{
  "hash": "fe86d046fd7649dca355e7a4ba88333a",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Boston Housing and fairness assessment\nauthor: Jessica Zhiyu Guo\ndate: July 1, 2025\ndescription: Harrison and Rubinfeld collected and studied families' willingness to pay for clean air through Boston housing market data in 1978. It was one of the standard toy datasets included in `scikit-learn`, but it has been critiqued and removed from the package for fairness issues. What can we learn from the problematic usage of sensitive attributes as predictive variables?\ncategories:\n  - linear regression\n  - EDA\n  - classification\ndata:\n  year: 1978\n  files: HousingData.csv\n---\n\n## Motivation\n\nHarrison and Rubinfeld studied families' willingness to pay for clean air using Boston area housing market data in 1978. To consider a more local measure of air pollution and a variety of factors influencing housing prices, the authors developed a dataset using a mixture of governmental data and prior research articles. The data was collected on the census tract level, using the nitric oxides (NOX) concentration as a proxy for air quality, the median housing value of owner-occupied homes in a census tract, as well as other control variables like accessibility to radial highways and weighted distance to employment centers. The authors use a hedonic pricing approach, which assumes that the price of a good or service can be modeled as a function of features both internal and external to the good or service. The authors found that air pollution's economic damage increases with both pollution levels and household income, based on housing market data.\n\nBesides the original research question, one can also use the dataset as a\nprediction problem: can house prices be accurately predicted using housing\nfeatures? This dataset was hence included as one of `scikit-learn` and\nTensorFlow’s standard toy datasets, specifically for housing price predictions.\nIt has also been used as a benchmark tool for many machine learning papers.\n\nIn 2020, users brought the dataset’s fairness issues to the scikit-learn development team (see scikit-learn issue [#16155](https://github.com/scikit-learn/scikit-learn/issues/16155)), after which the team decided to remove the dataset in scikit-learn version 1.2. The discussion on it points out that first, race/ethnicity proportion should not be a factor in housing price prediction tasks, and second, the parabolic form of the `B` variable assumes that there is an \"ideal\" proportion of Black residents, which is highly problematic.\n\nSince then, fairness practitioners have used this dataset to demonstrate what fairness issues in machine learning could look like and how to assess them. This data project is inspired by the [Fairlearn project](https://fairlearn.org/v0.12/user_guide/datasets/boston_housing_data.html).\n\n## Data\n\nThe data consists of 506 census tracts in Boston, with variables collected from\na mixture of surveys, administrative records, and other research papers. All\nvariables related to houses (e.g., median value) are only considering\nowner-occupied homes. Some variables are recorded at the census tract level,\nand some come from the town each tract is in. One town may contain many census\ntracts.\n\n### Data preview\n\n<h4><a href=\" https://cmustatistics.github.io/data-repository/data/HousingData.csv \"> HousingData.csv </a></h4>\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"CRIM\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"ZN\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"INDUS\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"CHAS\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"NOX\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RM\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"AGE\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"DIS\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RAD\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"TAX\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"PTRATIO\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"B\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"LSTAT\"],\"name\":[13],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"MEDV\"],\"name\":[14],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"0.00632\",\"2\":\"18.0\",\"3\":\"2.31\",\"4\":\"0\",\"5\":\"0.538\",\"6\":\"6.575\",\"7\":\"65.2\",\"8\":\"4.0900\",\"9\":\"1\",\"10\":\"296\",\"11\":\"15.3\",\"12\":\"396.90\",\"13\":\"4.98\",\"14\":\"24.0\"},{\"1\":\"0.02731\",\"2\":\"0.0\",\"3\":\"7.07\",\"4\":\"0\",\"5\":\"0.469\",\"6\":\"6.421\",\"7\":\"78.9\",\"8\":\"4.9671\",\"9\":\"2\",\"10\":\"242\",\"11\":\"17.8\",\"12\":\"396.90\",\"13\":\"9.14\",\"14\":\"21.6\"},{\"1\":\"0.02729\",\"2\":\"0.0\",\"3\":\"7.07\",\"4\":\"0\",\"5\":\"0.469\",\"6\":\"7.185\",\"7\":\"61.1\",\"8\":\"4.9671\",\"9\":\"2\",\"10\":\"242\",\"11\":\"17.8\",\"12\":\"392.83\",\"13\":\"4.03\",\"14\":\"34.7\"},{\"1\":\"0.03237\",\"2\":\"0.0\",\"3\":\"2.18\",\"4\":\"0\",\"5\":\"0.458\",\"6\":\"6.998\",\"7\":\"45.8\",\"8\":\"6.0622\",\"9\":\"3\",\"10\":\"222\",\"11\":\"18.7\",\"12\":\"394.63\",\"13\":\"2.94\",\"14\":\"33.4\"},{\"1\":\"0.06905\",\"2\":\"0.0\",\"3\":\"2.18\",\"4\":\"0\",\"5\":\"0.458\",\"6\":\"7.147\",\"7\":\"54.2\",\"8\":\"6.0622\",\"9\":\"3\",\"10\":\"222\",\"11\":\"18.7\",\"12\":\"396.90\",\"13\":\"NA\",\"14\":\"36.2\"},{\"1\":\"0.02985\",\"2\":\"0.0\",\"3\":\"2.18\",\"4\":\"0\",\"5\":\"0.458\",\"6\":\"6.430\",\"7\":\"58.7\",\"8\":\"6.0622\",\"9\":\"3\",\"10\":\"222\",\"11\":\"18.7\",\"12\":\"394.12\",\"13\":\"5.21\",\"14\":\"28.7\"},{\"1\":\"0.08829\",\"2\":\"12.5\",\"3\":\"7.87\",\"4\":\"NA\",\"5\":\"0.524\",\"6\":\"6.012\",\"7\":\"66.6\",\"8\":\"5.5605\",\"9\":\"5\",\"10\":\"311\",\"11\":\"15.2\",\"12\":\"395.60\",\"13\":\"12.43\",\"14\":\"22.9\"},{\"1\":\"0.14455\",\"2\":\"12.5\",\"3\":\"7.87\",\"4\":\"0\",\"5\":\"0.524\",\"6\":\"6.172\",\"7\":\"96.1\",\"8\":\"5.9505\",\"9\":\"5\",\"10\":\"311\",\"11\":\"15.2\",\"12\":\"396.90\",\"13\":\"19.15\",\"14\":\"27.1\"},{\"1\":\"0.21124\",\"2\":\"12.5\",\"3\":\"7.87\",\"4\":\"0\",\"5\":\"0.524\",\"6\":\"5.631\",\"7\":\"100.0\",\"8\":\"6.0821\",\"9\":\"5\",\"10\":\"311\",\"11\":\"15.2\",\"12\":\"386.63\",\"13\":\"29.93\",\"14\":\"16.5\"},{\"1\":\"0.17004\",\"2\":\"12.5\",\"3\":\"7.87\",\"4\":\"NA\",\"5\":\"0.524\",\"6\":\"6.004\",\"7\":\"85.9\",\"8\":\"6.5921\",\"9\":\"5\",\"10\":\"311\",\"11\":\"15.2\",\"12\":\"386.71\",\"13\":\"17.10\",\"14\":\"18.9\"},{\"1\":\"0.22489\",\"2\":\"12.5\",\"3\":\"7.87\",\"4\":\"0\",\"5\":\"0.524\",\"6\":\"6.377\",\"7\":\"94.3\",\"8\":\"6.3467\",\"9\":\"5\",\"10\":\"311\",\"11\":\"15.2\",\"12\":\"392.52\",\"13\":\"20.45\",\"14\":\"15.0\"},{\"1\":\"0.11747\",\"2\":\"12.5\",\"3\":\"7.87\",\"4\":\"0\",\"5\":\"0.524\",\"6\":\"6.009\",\"7\":\"82.9\",\"8\":\"6.2267\",\"9\":\"5\",\"10\":\"311\",\"11\":\"15.2\",\"12\":\"396.90\",\"13\":\"13.27\",\"14\":\"18.9\"},{\"1\":\"0.09378\",\"2\":\"12.5\",\"3\":\"7.87\",\"4\":\"0\",\"5\":\"0.524\",\"6\":\"5.889\",\"7\":\"39.0\",\"8\":\"5.4509\",\"9\":\"5\",\"10\":\"311\",\"11\":\"15.2\",\"12\":\"390.50\",\"13\":\"15.71\",\"14\":\"21.7\"},{\"1\":\"0.62976\",\"2\":\"0.0\",\"3\":\"8.14\",\"4\":\"0\",\"5\":\"0.538\",\"6\":\"5.949\",\"7\":\"61.8\",\"8\":\"4.7075\",\"9\":\"4\",\"10\":\"307\",\"11\":\"21.0\",\"12\":\"396.90\",\"13\":\"8.26\",\"14\":\"20.4\"},{\"1\":\"0.63796\",\"2\":\"0.0\",\"3\":\"8.14\",\"4\":\"NA\",\"5\":\"0.538\",\"6\":\"6.096\",\"7\":\"84.5\",\"8\":\"4.4619\",\"9\":\"4\",\"10\":\"307\",\"11\":\"21.0\",\"12\":\"380.02\",\"13\":\"10.26\",\"14\":\"18.2\"},{\"1\":\"0.62739\",\"2\":\"0.0\",\"3\":\"8.14\",\"4\":\"0\",\"5\":\"0.538\",\"6\":\"5.834\",\"7\":\"56.5\",\"8\":\"4.4986\",\"9\":\"4\",\"10\":\"307\",\"11\":\"21.0\",\"12\":\"395.62\",\"13\":\"8.47\",\"14\":\"19.9\"},{\"1\":\"1.05393\",\"2\":\"0.0\",\"3\":\"8.14\",\"4\":\"0\",\"5\":\"0.538\",\"6\":\"5.935\",\"7\":\"29.3\",\"8\":\"4.4986\",\"9\":\"4\",\"10\":\"307\",\"11\":\"21.0\",\"12\":\"386.85\",\"13\":\"6.58\",\"14\":\"23.1\"},{\"1\":\"0.78420\",\"2\":\"0.0\",\"3\":\"8.14\",\"4\":\"0\",\"5\":\"0.538\",\"6\":\"5.990\",\"7\":\"81.7\",\"8\":\"4.2579\",\"9\":\"4\",\"10\":\"307\",\"11\":\"21.0\",\"12\":\"386.75\",\"13\":\"14.67\",\"14\":\"17.5\"},{\"1\":\"0.80271\",\"2\":\"0.0\",\"3\":\"8.14\",\"4\":\"0\",\"5\":\"0.538\",\"6\":\"5.456\",\"7\":\"36.6\",\"8\":\"3.7965\",\"9\":\"4\",\"10\":\"307\",\"11\":\"21.0\",\"12\":\"288.99\",\"13\":\"11.69\",\"14\":\"20.2\"},{\"1\":\"0.72580\",\"2\":\"0.0\",\"3\":\"8.14\",\"4\":\"0\",\"5\":\"0.538\",\"6\":\"5.727\",\"7\":\"69.5\",\"8\":\"3.7965\",\"9\":\"4\",\"10\":\"307\",\"11\":\"21.0\",\"12\":\"390.95\",\"13\":\"11.28\",\"14\":\"18.2\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n\n### Variable descriptions\n\n| Variable | Description |\n|----|-------------|\n| CRIM | per capita crime rate by town  (units and crimes included not specified) |\n| ZN | percentage of residential land zoned for lots over 25,000 sq.ft. |\n| INDUS | proportion of non-retail business acres per town (nonretail businesses include industrial and commercial businesses) |\n| CHAS | Charles River dummy variable (= 1 if tract bounds river; 0 otherwise)|\n| NOX | nitric oxides concentration (parts per 10 million)|\n| RM | \taverage number of rooms per dwelling |\n| AGE | percentage of owner-occupied units built prior to 1940|\n| DIS | weighted log distances to five Boston employment centers|\n| RAD | index of accessibility to radial highways, where a higher number indicates higher accessibility|\n| TAX | full-value property-tax rate per $10,000|\n| PTRATIO | pupil-teacher ratio by school district |\n| B | 1000(Bk - 0.63)^2 where Bk is the proportion of Black people by town|\n| LSTAT | % lower status of the population, defined as half of the sum of proportion of adults without some high school education and proportion of male workers classified as laborers |\n| MED | Median value of owner-occupied homes, in $1000’s|\n\n\n## Questions\n\n1. Perform an exploratory data analysis on this dataset. What is the\n   relationship between house value and pollution? Which variables appear\n   associated with house value?\n\n2. Pretend the variables are not problematic for now and predict median housing\n   price from the variables given. Be sure to set aside a test set for\n   performance evaluation. What do you see?\n\n3. Remove `B` and `LSTAT` and build the prediction model again. Does the\n   performance decrease or increase?\n\n4. The original paper by Harrison and Rubinfeld assumes that the proportion of\n   Black residents and the social class of residents impacts housing prices, but\n   provided limited justification. Above we saw the performance difference\n   between including and not including these two variables, but fairness\n   research provides more metrics to assess fairness. Group parity is considered\n   one of the most important notions of fairness in research. Mathematically, it\n   is defined as $\\mathbb{E}[h(X) \\mid Y=y, A=a] = \\mathbb{E}[h(X) \\mid Y=y]$\n   where $A$ indicates a sensitive attribute like race or gender, and $h(X)$\n   could be any prediction function.\n\n    Let's simplify this problem by transforming `B`, `LSTAT`, and `MEDV` into\n    binary variables. Namely, we can code `LSTAT` and `MEDV` as 1 when the value\n    exceeds the column median, otherwise 0. We can code `B` as 1 when the value\n    is above 136.9, where the authors claim the variable begins to have a\n    negative impact on housing price.\n\n    Now the classification task is classifying housing prices as above or below\n    the median, using all other features. Use the transformed versions of `B`\n    and `LSTAT` as described above, and remember to keep a test set aside.\n\n    Calculate the demographic parity difference between groups A and B using\n    your test set data. This metric measures the absolute difference in\n    selection rates between the two groups, where the selection rate for each\n    group is the proportion of positive predictions (houses predicted as above\n    median price) within that group. Specifically, you'll compute:\n\n    Group A selection rate = (positive predictions in group A) / (total samples in group A)\n\n    Group B selection rate = (positive predictions in group B) / (total samples in group B)\n\n    Demographic parity difference = |Group A selection rate - Group B selection rate|\n\n    This tells you whether your model predicts 'above median price' at similar\n    rates for both groups, which is important for fairness. What is the group\n    parity difference you find and how would you interpret it? What alternative\n    variables would you include or not include?\n\n## References\n\nDavid Harrison, Jr and Daniel L Rubinfeld. Hedonic housing prices and the demand\nfor clean air. *Journal of Environmental Economics and Management*,\n5(1):81–102, 1978. <https://doi.org/10.1016/0095-0696(78)90006-2>\n\nHilde Weerts, Miroslav Dudík, Richard Edgar, Adrin Jalali, Roman Lutz, and\nMichael Madaio. Fairlearn: Assessing and Improving Fairness of AI Systems,\n*Journal of Machine Learning Research*, 24(257):1−8, 2023.\n<http://jmlr.org/papers/v24/23-0389.html>\n\n<https://fairlearn.org/v0.12/user_guide/datasets/boston_housing_data.html>\n\n<https://www.kaggle.com/datasets/altavish/boston-housing-dataset?resource=download>\n",
    "supporting": [
      "bostonhousing_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}